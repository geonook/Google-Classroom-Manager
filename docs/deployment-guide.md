# éƒ¨ç½²æŒ‡å—

æœ¬æŒ‡å—è©³ç´°èªªæ˜å¦‚ä½•å°‡ Google Classroom Manager Pro éƒ¨ç½²åˆ°ä¸åŒç’°å¢ƒï¼ŒåŒ…æ‹¬é–‹ç™¼ã€æ¸¬è©¦å’Œç”Ÿç”¢ç’°å¢ƒã€‚

## ğŸ¯ éƒ¨ç½²ç­–ç•¥

### ç’°å¢ƒé¡å‹
1. **é–‹ç™¼ç’°å¢ƒ (Development)**ï¼šç”¨æ–¼æœ¬åœ°é–‹ç™¼å’Œæ¸¬è©¦
2. **æ¸¬è©¦ç’°å¢ƒ (Staging)**ï¼šç”¨æ–¼æ•´åˆæ¸¬è©¦å’ŒåŠŸèƒ½é©—è­‰
3. **ç”Ÿç”¢ç’°å¢ƒ (Production)**ï¼šæ­£å¼ä½¿ç”¨ç’°å¢ƒ

### éƒ¨ç½²æ–¹å¼
- **æ‰‹å‹•éƒ¨ç½²**ï¼šé©ç”¨æ–¼å°è¦æ¨¡æˆ–ä¸€æ¬¡æ€§éƒ¨ç½²
- **è‡ªå‹•åŒ–éƒ¨ç½²**ï¼šä½¿ç”¨ GitHub Actions é€²è¡Œ CI/CD
- **ç‰ˆæœ¬åŒ–éƒ¨ç½²**ï¼šæ”¯æ´å¤šç‰ˆæœ¬ä¸¦è¡Œå’Œå›æ»¾

## ğŸ”§ ç’°å¢ƒè¨­å®š

### 1. é–‹ç™¼ç’°å¢ƒè¨­å®š

#### å‰ç½®éœ€æ±‚
```bash
# å®‰è£ Node.js å’Œ npm
node --version  # æ‡‰è©² >= 16
npm --version   # æ‡‰è©² >= 8

# å®‰è£ Google Apps Script CLI
npm install -g @google/clasp

# é©—è­‰å®‰è£
clasp --version
```

#### å°ˆæ¡ˆåˆå§‹åŒ–
```bash
# Clone å°ˆæ¡ˆ
git clone https://github.com/your-org/classroom-manager-pro.git
cd classroom-manager-pro

# å®‰è£ä¾è³´
npm install

# åŸ·è¡Œåˆå§‹è¨­å®š
npm run setup

# ç™»å…¥ Google Apps Script
clasp login
```

#### å»ºç«‹é–‹ç™¼å°ˆæ¡ˆ
```bash
# å»ºç«‹æ–°çš„ Apps Script å°ˆæ¡ˆ
clasp create --type standalone --title "Classroom Manager Pro - Dev"

# è¨­å®šå°ˆæ¡ˆ ID
# å°‡è¿”å›çš„ Script ID è¤‡è£½åˆ° .clasp.json ä¸­çš„ scriptId æ¬„ä½
```

#### æœ¬åœ°é–‹ç™¼
```bash
# é–‹å•Ÿç›£è¦–æ¨¡å¼ï¼Œè‡ªå‹•æ¨é€è®Šæ›´
npm run dev

# æ‰‹å‹•æ¨é€ç¨‹å¼ç¢¼
npm run push

# æŸ¥çœ‹åŸ·è¡Œæ—¥èªŒ
npm run logs
```

### 2. æ¸¬è©¦ç’°å¢ƒè¨­å®š

#### GitHub Secrets è¨­å®š
åœ¨ GitHub å°ˆæ¡ˆè¨­å®šä¸­æ–°å¢ä»¥ä¸‹ Secretsï¼š

```
CLASP_CREDENTIALS  # clasp èªè­‰è³‡è¨Š
STAGING_SCRIPT_ID  # æ¸¬è©¦ç’°å¢ƒçš„ Script ID
PRODUCTION_SCRIPT_ID  # ç”Ÿç”¢ç’°å¢ƒçš„ Script ID
```

#### å–å¾— CLASP_CREDENTIALS
```bash
# åœ¨æœ¬åœ°åŸ·è¡Œ clasp login å¾Œ
cat ~/.clasprc.json

# å°‡è¼¸å‡ºå…§å®¹è¤‡è£½åˆ° GitHub Secrets çš„ CLASP_CREDENTIALS
```

#### å»ºç«‹æ¸¬è©¦å°ˆæ¡ˆ
```bash
# å»ºç«‹æ¸¬è©¦ç’°å¢ƒå°ˆæ¡ˆ
clasp create --type standalone --title "Classroom Manager Pro - Staging"

# è¨˜éŒ„ Script IDï¼Œç¨å¾Œè¨­å®šåˆ° GitHub Secrets
```

### 3. ç”Ÿç”¢ç’°å¢ƒè¨­å®š

#### å»ºç«‹ç”Ÿç”¢å°ˆæ¡ˆ
```bash
# å»ºç«‹ç”Ÿç”¢ç’°å¢ƒå°ˆæ¡ˆ
clasp create --type standalone --title "Classroom Manager Pro"

# è¨˜éŒ„ Script IDï¼Œè¨­å®šåˆ° GitHub Secrets çš„ PRODUCTION_SCRIPT_ID
```

#### æ¬Šé™è¨­å®š
1. åœ¨ Google Apps Script ä¸­é–‹å•Ÿå°ˆæ¡ˆ
2. é»é¸ã€Œéƒ¨ç½²ã€â†’ã€Œæ–°å¢éƒ¨ç½²ä½œæ¥­ã€
3. é¸æ“‡ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€é¡å‹
4. è¨­å®šé©ç•¶çš„å­˜å–æ¬Šé™
5. è¨˜éŒ„ Web App URL

## ğŸš€ éƒ¨ç½²æµç¨‹

### 1. æ‰‹å‹•éƒ¨ç½²

#### é–‹ç™¼ç’°å¢ƒéƒ¨ç½²
```bash
# ç¢ºä¿åœ¨æ­£ç¢ºçš„å°ˆæ¡ˆç›®éŒ„
cd classroom-manager-pro

# æ¨é€ç¨‹å¼ç¢¼åˆ° Google Apps Script
clasp push

# éƒ¨ç½²æ–°ç‰ˆæœ¬
clasp deploy --description "Development build $(date)"

# æŸ¥çœ‹éƒ¨ç½²ç‹€æ…‹
clasp deployments
```

#### æ¸¬è©¦ç’°å¢ƒéƒ¨ç½²
```bash
# åˆ‡æ›åˆ°æ¸¬è©¦ç’°å¢ƒé…ç½®
cp .clasp.staging.json .clasp.json

# æ¨é€ä¸¦éƒ¨ç½²
clasp push
clasp deploy --description "Staging v$(npm run version --silent)"
```

#### ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²
```bash
# åˆ‡æ›åˆ°ç”Ÿç”¢ç’°å¢ƒé…ç½®
cp .clasp.production.json .clasp.json

# æ¨é€ä¸¦éƒ¨ç½²
clasp push
clasp deploy --description "Production v$(npm run version --silent)"
```

### 2. è‡ªå‹•åŒ–éƒ¨ç½² (GitHub Actions)

#### è§¸ç™¼æ¢ä»¶
- **æ¸¬è©¦ç’°å¢ƒ**ï¼šæ¨é€åˆ° `develop` åˆ†æ”¯æ™‚è‡ªå‹•éƒ¨ç½²
- **ç”Ÿç”¢ç’°å¢ƒ**ï¼šæ¨é€åˆ° `main` åˆ†æ”¯æ™‚è‡ªå‹•éƒ¨ç½²

#### éƒ¨ç½²æµç¨‹
1. **ç¨‹å¼ç¢¼æª¢æŸ¥**ï¼šåŸ·è¡Œ linting å’Œæ ¼å¼æª¢æŸ¥
2. **æ¸¬è©¦åŸ·è¡Œ**ï¼šåŸ·è¡Œå–®å…ƒæ¸¬è©¦å’Œæ•´åˆæ¸¬è©¦
3. **å»ºç½®å°ˆæ¡ˆ**ï¼šç·¨è­¯å’Œæ‰“åŒ…ç¨‹å¼ç¢¼
4. **éƒ¨ç½²åˆ°ç’°å¢ƒ**ï¼šæ¨é€åˆ°å°æ‡‰çš„ Google Apps Script å°ˆæ¡ˆ
5. **éƒ¨ç½²é©—è­‰**ï¼šåŸ·è¡Œéƒ¨ç½²å¾Œæ¸¬è©¦
6. **é€šçŸ¥åœ˜éšŠ**ï¼šç™¼é€éƒ¨ç½²ç‹€æ…‹é€šçŸ¥

#### æ‰‹å‹•è§¸ç™¼éƒ¨ç½²
```bash
# è§¸ç™¼æ¸¬è©¦ç’°å¢ƒéƒ¨ç½²
git push origin develop

# è§¸ç™¼ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²
git push origin main

# æˆ–ä½¿ç”¨ GitHub ä»‹é¢æ‰‹å‹•è§¸ç™¼ workflow
```

## ğŸ“‹ éƒ¨ç½²æª¢æŸ¥æ¸…å–®

### éƒ¨ç½²å‰æª¢æŸ¥
- [ ] æ‰€æœ‰æ¸¬è©¦é€šé
- [ ] ç¨‹å¼ç¢¼å·²ç¶“éå¯©æŸ¥
- [ ] æ–‡ä»¶å·²æ›´æ–°
- [ ] ç‰ˆæœ¬è™Ÿå·²æ›´æ–°
- [ ] CHANGELOG å·²æ›´æ–°
- [ ] å‚™ä»½ç¾æœ‰ç‰ˆæœ¬

### éƒ¨ç½²ä¸­æª¢æŸ¥
- [ ] ç›£æ§éƒ¨ç½²é€²åº¦
- [ ] æª¢æŸ¥éƒ¨ç½²æ—¥èªŒ
- [ ] é©—è­‰æ¬Šé™è¨­å®š
- [ ] ç¢ºèª API é€£ç·šæ­£å¸¸

### éƒ¨ç½²å¾Œæª¢æŸ¥
- [ ] åŠŸèƒ½æ­£å¸¸é‹ä½œ
- [ ] æ•ˆèƒ½æŒ‡æ¨™æ­£å¸¸
- [ ] éŒ¯èª¤ç‡åœ¨é æœŸç¯„åœ
- [ ] ä½¿ç”¨è€…å­˜å–æ­£å¸¸
- [ ] ç›£æ§ç³»çµ±æ­£å¸¸

## ğŸ”„ ç‰ˆæœ¬ç®¡ç†

### ç‰ˆæœ¬ç­–ç•¥
```
main (ç”Ÿç”¢)     v2.0.0 â”€â”€â”€â”€ v2.0.1 â”€â”€â”€â”€ v2.1.0
                   â”‚          â”‚          â”‚
develop (æ¸¬è©¦)     â””â”€ v2.0.1-rc.1 â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
feature/xxx        â””â”€ åŠŸèƒ½é–‹ç™¼ â”€â”€â”€â”€â”€â”˜
```

### ç‰ˆæœ¬ç™¼å¸ƒæµç¨‹
1. **åŠŸèƒ½é–‹ç™¼**ï¼šåœ¨ feature åˆ†æ”¯é–‹ç™¼
2. **åˆä½µåˆ° develop**ï¼šé€²è¡Œæ•´åˆæ¸¬è©¦
3. **å»ºç«‹ release åˆ†æ”¯**ï¼šæº–å‚™ç™¼å¸ƒ
4. **åˆä½µåˆ° main**ï¼šæ­£å¼ç™¼å¸ƒ
5. **æ¨™è¨˜ç‰ˆæœ¬**ï¼šå»ºç«‹ Git tag

### èªç¾©åŒ–ç‰ˆæœ¬
- **ä¸»ç‰ˆæœ¬ (Major)**ï¼šä¸ç›¸å®¹çš„ API è®Šæ›´
- **æ¬¡ç‰ˆæœ¬ (Minor)**ï¼šå‘å¾Œç›¸å®¹çš„åŠŸèƒ½æ–°å¢
- **ä¿®è¨‚ç‰ˆæœ¬ (Patch)**ï¼šå‘å¾Œç›¸å®¹çš„éŒ¯èª¤ä¿®å¾©

```bash
# æ›´æ–°ç‰ˆæœ¬è™Ÿ
npm version major    # 1.0.0 â†’ 2.0.0
npm version minor    # 1.0.0 â†’ 1.1.0
npm version patch    # 1.0.0 â†’ 1.0.1

# æ¨é€ç‰ˆæœ¬æ¨™ç±¤
git push origin --tags
```

## ğŸ›¡ï¸ å®‰å…¨æ€§è€ƒé‡

### æ•æ„Ÿè³‡è¨Šç®¡ç†
- **Never commit secrets**ï¼šçµ•ä¸å°‡æ•æ„Ÿè³‡è¨Šæäº¤åˆ° Git
- **Environment variables**ï¼šä½¿ç”¨ç’°å¢ƒè®Šæ•¸å­˜å„²é…ç½®
- **Encrypted secrets**ï¼šä½¿ç”¨ GitHub Secrets å­˜å„²æ•æ„Ÿè³‡è¨Š

### æ¬Šé™æœ€å°åŒ–
```javascript
// åªè«‹æ±‚å¿…è¦çš„æ¬Šé™ç¯„åœ
const REQUIRED_SCOPES = [
  'https://www.googleapis.com/auth/classroom.courses',
  'https://www.googleapis.com/auth/classroom.rosters'
];
```

### è³‡æ–™ä¿è­·
- å®šæœŸå‚™ä»½é‡è¦è³‡æ–™
- å¯¦ä½œè³‡æ–™åŠ å¯†
- éµå¾ª GDPR å’Œ FERPA è¦ç¯„

## ğŸ“Š ç›£æ§èˆ‡æ—¥èªŒ

### éƒ¨ç½²ç›£æ§
```bash
# ç›£æ§éƒ¨ç½²ç‹€æ…‹
npm run monitor:deployment

# æª¢æŸ¥æ‡‰ç”¨ç¨‹å¼å¥åº·ç‹€æ…‹
npm run health:check

# æŸ¥çœ‹å³æ™‚æ—¥èªŒ
npm run logs:tail
```

### é—œéµæŒ‡æ¨™
- **éƒ¨ç½²æˆåŠŸç‡**ï¼šç›®æ¨™ > 95%
- **éƒ¨ç½²æ™‚é–“**ï¼šç›®æ¨™ < 5 åˆ†é˜
- **å›æ»¾æ™‚é–“**ï¼šç›®æ¨™ < 2 åˆ†é˜
- **éŒ¯èª¤ç‡**ï¼šç›®æ¨™ < 1%

### è­¦å ±è¨­å®š
- API éŒ¯èª¤ç‡è¶…éé–¾å€¼
- åŸ·è¡Œæ™‚é–“è¶…éé™åˆ¶
- è¨˜æ†¶é«”ä½¿ç”¨é‡ç•°å¸¸
- ä½¿ç”¨è€…å›å ±å•é¡Œ

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è¦‹éƒ¨ç½²å•é¡Œ

#### 1. æ¬Šé™éŒ¯èª¤
```bash
# ç—‡ç‹€
Error: Insufficient permissions

# è§£æ±ºæ–¹æ¡ˆ
# 1. é‡æ–°æˆæ¬Š
clasp login --creds credentials.json

# 2. æª¢æŸ¥ OAuth ç¯„åœ
# ç¢ºèª appsscript.json ä¸­çš„ oauthScopes è¨­å®šæ­£ç¢º
```

#### 2. è…³æœ¬åŸ·è¡Œè¶…æ™‚
```bash
# ç—‡ç‹€
Error: Script execution timeout

# è§£æ±ºæ–¹æ¡ˆ
# 1. å„ªåŒ–ç¨‹å¼ç¢¼æ•ˆèƒ½
# 2. å¯¦ä½œæ‰¹æ¬¡è™•ç†
# 3. ä½¿ç”¨ç•°æ­¥è™•ç†
```

#### 3. API é…é¡è¶…é™
```bash
# ç—‡ç‹€
Error: Rate limit exceeded

# è§£æ±ºæ–¹æ¡ˆ
# 1. å¯¦ä½œ API é™é€Ÿ
# 2. ä½¿ç”¨å¿«å–æ©Ÿåˆ¶
# 3. ç”³è«‹æ›´é«˜é…é¡
```

### å›æ»¾ç¨‹åº
```bash
# ç·Šæ€¥å›æ»¾åˆ°å‰ä¸€ç‰ˆæœ¬
clasp deployments  # æŸ¥çœ‹éƒ¨ç½²æ­·å²
clasp undeploy <deployment-id>  # ç§»é™¤æœ‰å•é¡Œçš„éƒ¨ç½²

# æˆ–éƒ¨ç½²ç©©å®šç‰ˆæœ¬
git checkout v2.0.0
clasp push
clasp deploy --description "Emergency rollback to v2.0.0"
```

## ğŸ“ æ”¯æ´èˆ‡è¯çµ¡

### éƒ¨ç½²æ”¯æ´
- ğŸ“§ éƒ¨ç½²å•é¡Œï¼šdeploy@classroom-manager-pro.com
- ğŸš¨ ç·Šæ€¥äº‹ä»¶ï¼šemergency@classroom-manager-pro.com
- ğŸ’¬ æŠ€è¡“è¨è«–ï¼š[GitHub Discussions](https://github.com/your-org/classroom-manager-pro/discussions)

### éƒ¨ç½²é€šçŸ¥
- Slack: #deployments é »é“
- Email: éƒ¨ç½²ç‹€æ…‹è‡ªå‹•é€šçŸ¥
- GitHub: Release é€šçŸ¥

---

## ğŸ¯ æœ€ä½³å¯¦å‹™

1. **æ¼¸é€²å¼éƒ¨ç½²**ï¼šå…ˆéƒ¨ç½²åˆ°æ¸¬è©¦ç’°å¢ƒé©—è­‰
2. **è‡ªå‹•åŒ–æ¸¬è©¦**ï¼šç¢ºä¿éƒ¨ç½²å“è³ª
3. **ç›£æ§è­¦å ±**ï¼šåŠæ™‚ç™¼ç¾å•é¡Œ
4. **å¿«é€Ÿå›æ»¾**ï¼šæº–å‚™ç·Šæ€¥æ‡‰è®Šè¨ˆç•«
5. **æ–‡ä»¶ç¶­è­·**ï¼šä¿æŒéƒ¨ç½²æ–‡ä»¶æœ€æ–°

è¨˜ä½ï¼šå¥½çš„éƒ¨ç½²æµç¨‹æ˜¯å°ˆæ¡ˆæˆåŠŸçš„é—œéµï¼
#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ”§ Pre-commit: æ ¼å¼åŒ–ç¨‹å¼ç¢¼ä¸¦æ¨é€åˆ° Google Apps Script..."

# æ ¼å¼åŒ–å’Œæª¢æŸ¥ç¨‹å¼ç¢¼
npm run format
npm run lint:fix

# æª¢æŸ¥æ˜¯å¦æœ‰ .clasp.json å’Œç™»å…¥ç‹€æ…‹
if [ -f .clasp.json ] && [ -f ~/.clasprc.json ]; then
    echo "ğŸ“¤ æ¨é€åˆ° Google Apps Script..."
    clasp push
    echo "âœ… ç¨‹å¼ç¢¼å·²è‡ªå‹•æ¨é€åˆ° Google Apps Script"
else
    echo "âš ï¸  CLASP æœªè¨­å®šï¼Œè·³éè‡ªå‹•æ¨é€"
    echo "è«‹åŸ·è¡Œ 'clasp login' å’Œè¨­å®š .clasp.json"
fi